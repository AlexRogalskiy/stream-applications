version: '3'
services:
  mysql:
     ports:
        - "3306:3306"
  kafka-broker:
      ports:
        - "9092:9092"
      environment:
        - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://${KAFKA_ADVERTISED_HOST_NAME}:9092   

  dataflow-server:
      environment:
        - spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.binder.brokers=PLAINTEXT://${KAFKA_ADVERTISED_HOST_NAME}:9092
        - spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.streams.binder.brokers=PLAINTEXT://${KAFKA_ADVERTISED_HOST_NAME}:9092
